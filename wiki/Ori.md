# Упорядоченный идентификатор ресурса (Ordered Resource Identifier, Ori)

Ori — последовательность символов идентифицирующая ресурс. В качестве ресурса могут выступать: модуль, подмодуль.

Примеры ori:

```
010-requirements
020-course-structure
030-csharp-syntax
```

## Синтаксис

Ori включает в себя ASCII символы в нижнем регистре, дефисы и цифры:

```regex
^(?<Rank>\d{3})-(?<Id>[a-z][a-z-]{2,254})$
```

Ori состоит из двух частей: числовой и строковой, разделённых символом дефиса (`-`). У каждой из этих частей свои задачи.

## Числовая часть (Rank)

Состоит из трёх чисел. Позволяет держать упорядоченной физическую структуру ресурсов. Применяется для сортировки по умолчанию для отображаемых ресурсов в рамках одного типа.

Рекомендуется все новые ori создавать от `010` с шагом `+10` в числовой части. Это нужно для того, чтобы иметь возможность добавлять новых детей родителю в произвольную позицию иерархии. Если вам нужно вставить подмодуль в середину модуля:

- найдите элементы между которыми нужно добавить новый материал
- разделите разницу между числовыми частями на 2 с округлением вверх
- используйте получившийся индекс для нового ori.

Логическая сортировка может игнорировать физическую. Например физически подмодули могут располагаться в порядке, удобном для написания материала. Логическая сортировка в рамках урока зависит от того какой путь выбрал ученик, она может игнорировать подмодули не подходящие под уровень сложности или менять их местами в зависимости от выбранного предмета.

### Переиндексация

Может наступить такая ситуация, когда нам не будет хватать свободных индексов для вставки новых элементов. Тогда необходимо произвести переиндексацию:

- в переиндексации участвуют только дети одного родителя
- необходимо взять всех детей и упорядочить их по текущим индексам
- после этого необходимо присвоить новые индексы всем детям по порядку
- новые индексы следует начинать с позиции `010` и далее с шагом `+10`

Возможность переиндексации, обозначает то, что числовая часть может со временем меняться. Поэтому не стоит использовать её для идентификации элемента.

### Свойства

Числовая часть обладает следующими свойствами:

- Уникальность в рамках родителя. Но не подходит для долгосрочной идентификации из-за переиндексации.
- Нестабильность. Может меняться во время переиндексации.
- Упорядоченность. Даёт возможность использования сортировки по умолчанию для ori в рамках родителя.
- Гибкость. Позволяет вставлять ресурсы в произвольную позицию упорядоченного списка.
- Дружелюбность к Uri и именам на файловых системах. Можно использовать как часть физического идентификатора ресурсов.

## Строковая часть (Id)

Длинной от 3 до 255 символов. Формат latin kebab-case-lower. Применяется для глобальной идентификации узла в рамках всей иерархии.

Эту часть следует использовать для наружней идентификации ресурса. Она гарантированно стабильна и коротка.

Строковая часть безопасна для использования в URI. Если нужно сформировать ссылку на элемент (модуль, подмодуль), то для slug части следует использовать именно строковую составляющую ori (без числовой).

### Краткость

Строковая часть должна быть максимально короткой, но при этом человеко читаемой. Рекомендуется использовать не больше 3-5 слов. При этом она должна чётко отражать содержимое элемента.

При наличии общепризнанной аббревиатуры у термина следует предпочесть именно её. Например:

- ef — вместо Entity Framework Core
- asp — вместо ASP.NET Core
- ui — вместо user interface

### Изменение

Строковая часть предназначена для идентификации элемента. Она будет использоваться для постоянных ссылок снаружи иерархии. Изменять её крайне не рекомендуется. Исключением могут являться только синтаксические ошибки в изначальном написании.

### Свойства

Строковая часть обладает следующими свойствами:

- Уникальность в рамках всей иерархии. Подходит для долгосрочной идентификации.
- Стабильность. Строковая часть не меняется, выдаётся элементу с рождения и навсегда.
- Дружелюбность к Uri и именам на файловых системах. Можно использовать как часть физического идентификатора ресурсов.
